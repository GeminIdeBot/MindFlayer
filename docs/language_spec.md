# Спецификация языка MindFlayer

## Введение
MindFlayer — это эзотерический, стековый язык программирования, разработанный для "взлома мозга" программиста. Он оперирует абстрактными "мыслями" (целыми числами) в двух стеках: "сознании" (основной стек) и "подсознании" (вспомогательный стек). Операции языка не всегда очевидны и могут приводить к неожиданным результатам.

## Данные
Язык оперирует байтами (целыми числами от 0 до 255). Каждый стек может содержать до 30000 таких байтов.

## Стек
MindFlayer использует два стека:
*   **Сознание (Main Stack):** Основной рабочий стек. Указатель `edi` в ассемблере.
*   **Подсознание (Subconscious Stack):** Вспомогательный стек. Указатель `esi` в ассемблере.

## Инструкции

| Символ | Название    | Описание                                                                                                                              |
|--------|-------------|---------------------------------------------------------------------------------------------------------------------------------------|
| `F`    | Flicker     | Генерирует случайное число (0-255) и помещает его в "сознание". Побочный эффект: С вероятностью 25% меняет местами две случайные "мысли" в "подсознании". С вероятностью 10% инвертирует биты *всех* "мыслей" в "сознании". |
| `S`    | Shift       | Перемещает верхнюю "мысль" из "сознания" в "подсознание". Побочный эффект: С вероятностью 30% перемещает *случайную* "мысль" из "подсознания" обратно в "сознание". |
| `C`    | Contort     | Берет верхнюю "мысль" из "сознания", применяет к ней операцию `((value * 5) XOR 0x77) + (value AND 0x11)`. Побочный эффект: С вероятностью 15% дублирует верхнюю "мысль" в "подсознании". |
| `D`    | Disorient   | Берет верхнюю "мысль" из "сознания". Побочный эффект: Если число четное, меняет местами текущую и предыдущую "мысли" в "сознании". Если число нечетное, обнуляет случайную "мысль" в "подсознании". |
| `E`    | Entangle    | Берет две верхние "мысли" (A, B) из "сознания". Применяет `(A OR B) - (A XOR B)` к `A`. Применяет `(A AND B) + (A OR B)` к `B`. Побочный эффект: С вероятностью 50% помещает на стек случайное число. |
| `V`    | Vanish      | Удаляет верхнюю "мысль" из "сознания". Побочный эффект: С вероятностью 20% удаляет также верхнюю "мысль" из "подсознания". |
| `M`    | Meld        | Берет две верхние "мысли" (A, B) из "сознания". Вычисляет `(A XOR B) + (A AND B) + (B OR A)` и помещает результат обратно. Побочный эффект: С вероятностью 30% меняет указатель "сознания" на случайное значение (в пределах стека). |
| `P`    | Project     | Выводит верхнюю "мысль" из "сознания" как символ. Побочный эффект: С вероятностью 10% инвертирует биты выведенного символа перед выводом. |
| `I`    | Imprint     | Считывает символ и помещает его ASCII-значение как "мысль" в "сознание". Побочный эффект: С вероятностью 20% дублирует введенный символ в "подсознании". |
| `/`    | Scan        | Считывает число из стандартного ввода и помещает его в "сознание".                                                                  |
| `L`    | Labyrinth   | Начинает цикл. Если верхняя "мысль" в "сознании" равна нулю, переходит к соответствующему `K`. Побочный эффект: Если "сознание" пусто, помещает 0 на стек. С вероятностью 5% меняет порядок всех "мыслей" в "сознании" на обратный. |
| `K`    | Key         | Завершает цикл. Если верхняя "мысль" в "сознании" не равна нулю, переходит к соответствующему `L`. Побочный эффект: С вероятностью 10% обнуляет верхнюю "мысль" в "подсознании". |
| `N`    | Neuron      | Помещает в "сознание" значение "нейрона" по указанному индексу. Индекс берется из верхней "мысли" в "сознании". Побочный эффект: При чтении "нейрона", с вероятностью 10% значение этого "нейрона" инвертируется. |
| `O`    | Observe     | Записывает верхнюю "мысль" из "сознания" в "нейрон" по указанному индексу. Индекс берется из следующей "мысли" в "сознании". Побочный эффект: При записи в "нейрон", с вероятностью 5% случайный "нейрон" обнуляется. |

## Комментарии
Любые символы, не входящие в список инструкций, игнорируются и могут использоваться для комментариев или форматирования.

## Пример программы (first_mindflayer.mf)
```
F C D E V M P S L K